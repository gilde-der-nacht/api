<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>
body {
    width: 40em;
    margin: 1em auto;
}

input[type=text] {
    width: 30em;
}
</style>
<script src="olymp.js"></script>
<script>

async function status() {
    const status = await Olymp.status();
    document.getElementById('status-output').innerText = JSON.stringify(status);
}

async function add() {
    const resourceUid = document.getElementById('add-resource-uid').value;
    const publicBody = JSON.parse(document.getElementById('add-public').value);
    const privateBody = JSON.parse(document.getElementById('add-private').value);
    await Olymp.entriesAdd(resourceUid, publicBody, privateBody);
}

async function list() {
    const resourceUid = document.getElementById('list-resource-uid').value;
    const list = await Olymp.entriesList(resourceUid);
    document.getElementById('list-output').innerText = list.map(entry => entry.timestamp + ' - ' + entry.userAgent + ' - ' + entry.publicBody + ' - ' + entry.privateBody).join('\n');
}

function main() {
    document.getElementById('status').addEventListener('click', status);
    document.getElementById('add').addEventListener('click', add);
    document.getElementById('list').addEventListener('click', list);
}

window.addEventListener('load', main);
</script>
</head>
<body>

<h1>Olymp Admin</h1>

<h2>status</h2>

<input id="status" type="button" value="status">

<pre id="status-output"></pre>

<h2>add entry</h2>

<p>Resource UID <input id="add-resource-uid" type="text" value="0000000000000000000000000000000000000000000000000000000000000000"></p>
<p>Public <input id="add-public" type="text" value="{&quot;data&quot;: &quot;Hello&quot;}"></p>
<p>Private <input id="add-private" type="text" value="{&quot;data&quot;: &quot;x@y.z&quot;}"></p>

<input id="add" type="button" value="add">

<pre id="add-output"></pre>

<h2>list all entries</h2>

<p>Resource UID <input id="list-resource-uid" type="text" value="0000000000000000000000000000000000000000000000000000000000000000"></p>

<input id="list" type="button" value="list">

<pre id="list-output"></pre>

<h2>form</h2>

<p><strong>Not Implemented Yet</strong></p>

<!-- /form/0000000000000000000000000000000000000000000000000000000000000000 -->
<form action="/status" method="POST">
    <p>a-public <input name="a-public-name" data-access="public" type="text" value="a-public-value"></p>
    <p>b-public <input name="b-public-name" data-access="public" type="text" value="b-public-value"></p>
    <p>c-public <input name="c-public-name" data-access="public" type="text" value="c-public-value"></p>
    <p>c-private <input name="c-private-name" data-access="private" type="text" value="c-private-value"></p>
    <input name="d-public-name" data-access="public" type="hidden" value="d-public-value ö">
    <input name="e-public-name" data-access="public" type="hidden" value="e-public-value ä">
    <input name="f-public-name" data-access="public" type="hidden" value="f-public-value ü">
    <input type="submit">
</form>

<pre id="form-output"></pre>

</body>
</html>
