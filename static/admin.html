<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>
body {
    width: 40em;
    margin: 1em auto;
}

input[type=text] {
    width: 30em;
}
</style>
<script src="olymp.js"></script>
<script>

async function status() {
    const status = await Olymp.status();
    document.getElementById('status-output').innerText = JSON.stringify(status);
}

async function add() {
    const resourceUid = document.getElementById('add-resource-uid').value;
    const publicBody = JSON.parse(document.getElementById('add-public').value);
    const privateBody = JSON.parse(document.getElementById('add-private').value);
    await Olymp.entriesAdd(resourceUid, publicBody, privateBody);
}

async function list() {
    const resourceUid = document.getElementById('list-resource-uid').value;
    const list = await Olymp.entriesList(resourceUid);
    document.getElementById('list-output').innerText = list.map(entry => entry.timestamp + ' - ' + entry.userAgent + ' - ' + entry.publicBody + ' - ' + entry.privateBody).join('\n');
}

function main() {
    document.getElementById('status').addEventListener('click', status);
    document.getElementById('add').addEventListener('click', add);
    document.getElementById('list').addEventListener('click', list);
}

window.addEventListener('load', main);
</script>
</head>
<body>

<h1>status</h1>

<input id="status" type="button" value="status">

<pre id="status-output"></pre>

<h1>add entry</h1>

<p>Resource UID <input id="add-resource-uid" type="text" value="0000000000000000000000000000000000000000000000000000000000000000"></p>
<p>Public <input id="add-public" type="text" value="{&quot;data&quot;: &quot;Hello&quot;}"></p>
<p>Private <input id="add-private" type="text" value="{&quot;data&quot;: &quot;x@y.z&quot;}"></p>

<input id="add" type="button" value="add">

<pre id="add-output"></pre>

<h1>list all entries</h1>

<p>Resource UID <input id="list-resource-uid" type="text" value="0000000000000000000000000000000000000000000000000000000000000000"></p>

<input id="list" type="button" value="list">

<pre id="list-output"></pre>

<!--
Not Implemented Yet

<h1>form</h1>

<form action="/form/0000000000000000000000000000000000000000000000000000000000000000" method="POST">
    <p>a <input name="a" type="text"></p>
    <p>b <input name="b" type="text"></p>
    <p>c <input name="c" type="text"></p>
    <input name="d" type="hidden" value="ö">
    <input name="e" type="hidden" value="ä">
    <input name="f" type="hidden" value="ü">
    <input type="submit">
</form>

<pre id="form-output"></pre>
-->

</body>
</html>
